{% parse_json request_object %}
{
  "template": "modules/core/generic",
  "data": {
    "to": "https://api.openai.com/v1/embeddings",
    "headers": {
      "Content-Type": "application/json",
      "Authorization": "Bearer {{ context.constants['modules/openai/OPENAI_SECRET_TOKEN'] }}"
    },
    "request_type": "POST",
    "payload": { "model": "text-embedding-ada-002" }
  }
}
{% endparse_json %}

{% liquid
  hash_assign request_object['data']['payload']['input'] = object | compact

  return request_object
%}

